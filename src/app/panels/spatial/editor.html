<!--
  ~ Copyright 2014-2016 European Environment Agency
  ~
  ~ Licensed under the EUPL, Version 1.1 or â€“ as soon
  ~ they will be approved by the European Commission -
  ~ subsequent versions of the EUPL (the "Licence");
  ~ You may not use this work except in compliance
  ~ with the Licence.
  ~ You may obtain a copy of the Licence at:
  ~
  ~ https://joinup.ec.europa.eu/community/eupl/og_page/eupl
  ~
  ~ Unless required by applicable law or agreed to in
  ~ writing, software distributed under the Licence is
  ~ distributed on an "AS IS" basis,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
  ~ either express or implied.
  ~ See the Licence for the specific language governing
  ~ permissions and limitations under the Licence.
  -->

<form>
  <!-- main Map settings -->
  <div class="row">
    <div class="col-sm-4 col-md-4">
      <h6>Background layer</h6>
      <select class="form-control"
              ng-options="layer.key as layer.key for layer in backgroundLayers"
              ng-model="panel.backgroundLayer"/>
    </div>
    <!-- Zoom, legend ...-->
    <div class="col-sm-4 col-md-4">
      <h6>Center longitude</h6>
      <input type="number"
             class="form-control"
             ng-model="panel.centerLon"/>
      <h6>latitude</h6>
      <input type="number"
             class="form-control"
             ng-model="panel.centerLat"/>
      <h6>Zoom</h6>
      <input type="number"
             class="form-control"
             ng-model="panel.zoom"/>
    </div>
  </div>

  <!-- Spatial options -->
  <div class="row">
    <div class="col-sm-4 col-md-4">
      <h6>Map mode
        <tip>
          Filter provided the capability to apply spatial filter to the query.
          Heatmap is based on a geometry field and provide an overview of where are
          document located.
          Thematic map is based on an attribute and allows classification.
          Map is displaying geometry objects from results.
        </tip>
      </h6>
      <select class="form-control"
              ng-options="opt for opt in mapModes"
              ng-model="panel.mapMode"/>
    </div>
  </div>


  <div class="row"
       ng-show="panel.mapMode === 'filter'">
    <div class="col-sm-4 col-md-4">
      <h6>Geometry field</h6>
      <!-- TODO: Would be good to filter on geom columns -->
      <input bs-typeahead
             ng-options="field for field in fields.list"
             type="text"
             class="form-control"
             ng-model="panel.filterField"
             ng-change="set_refresh(true)">
    </div>
    <div class="col-sm-4 col-md-4">
      <h6>Filter mode</h6>
      <select class="form-control"
              ng-options="f as f for f in filterModes"
              ng-model="panel.filterMode"/>
    </div>
  </div>

  <div class="row"
       ng-show="panel.mapMode === 'map'">
    <div class="col-sm-4 col-md-4">
      <h6>Unsupported</h6>
      <!--<h6>Geometry field</h6>
      <input bs-typeahead
             ng-options="field for field in fields.list"
             type="text"
             class="form-control"
             ng-model="panel.filterField"
             ng-change="set_refresh(true)">-->
    </div>
  </div>

  <div class="row"
       ng-show="panel.mapMode === 'heatmap'">
    <div class="col-sm-4 col-md-4">
      <h6>Geometry field</h6>
      <!-- TODO: Would be good to filter on geom columns -->
      <input bs-typeahead
             ng-options="field for field in fields.list"
             type="text"
             class="form-control"
             ng-model="panel.heatmapField"
             ng-change="set_refresh(true)">
    </div>
    <div class="col-sm-4 col-md-4">

    </div>
  </div>


  <div class="row"
       ng-show="panel.mapMode === 'thematic'">
    <div class="col-sm-4 col-md-4">
      <h6>Clasification field</h6>
      <!-- TODO: Would be good to filter on not geom columns -->
      <input bs-typeahead
             ng-options="field for field in fields.list"
             type="text"
             class="form-control"
             ng-model="panel.thematicField"
             ng-change="set_refresh(true)">
    </div>
    <div class="col-sm-4 col-md-4">
      <h6>Thematic layer</h6>
      <select class="form-control"
              ng-options="layer.key as layer.key for layer in thematicLayers"
              ng-model="panel.thematicLayer"
              ng-change="addThematicLayer()"/>
      <h6>Thematic key field</h6>
      <select class="form-control"
              ng-options="field for field in thematicLayerFields"
              ng-model="panel.thematicLayerField"/>
    </div>
  </div>
</form>
